<?xml version='1.0' encoding='ascii'?>
<!DOCTYPE rfc SYSTEM "rfc2629.dtd">
<?xml-stylesheet type='text/xsl' href='rfc2629.xslt' ?>
<?rfc toc="yes"?>
<?rfc iprnotified="no" ?>
<?rfc symrefs="yes"?>
<?rfc compact="yes" ?>
<?rfc subcompact="no" ?>
<rfc category="std" docName="draft-ietf-alto-cdni-request-routing-alto-07" ipr="trust200902" obsoletes="" updates="" submissionType="IETF" xml:lang="en">
  <front>
    <title abbrev="CDNI FCI using ALTO">Content Delivery Network Interconnection (CDNI) Request Routing:
      CDNI Footprint and Capabilities Advertisement using ALTO</title>
    <author initials="J." surname="Seedorf" fullname="Jan Seedorf">
      <organization abbrev="HFT Stuttgart - Univ. of Applied Sciences">HFT Stuttgart - Univ. of Applied Sciences</organization>
      <address>
        <postal>
          <street>Schellingstrasse 24</street>
          <city>Stuttgart</city>
          <code>70174</code>
          <country>Germany</country>
        </postal>
        <phone>+49-0711-8926-2801</phone>
        <email>jan.seedorf@hft-stuttgart.de</email>
      </address>
    </author>
    <author initials="Y." surname="Yang" fullname="Y.R. Yang">
      <organization abbrev="Tongji/Yale">Tongji/Yale University</organization>
      <address>
        <postal>
          <street>51 Prospect Street</street>
          <city>New Haven, CT</city>
          <code>06511</code>
          <country>United States of America</country>
        </postal>
        <email>yry@cs.yale.edu</email>
        <uri>http://www.cs.yale.edu/~yry/</uri>
      </address>
    </author>
    <author initials="K." surname="Ma" fullname="Kevin J. Ma">
      <organization abbrev="Ericsson">Ericsson</organization>
      <address>
        <postal>
          <street>43 Nagog Park</street>
          <city>Acton, MA</city>
          <code>01720</code>
          <country>United States of America</country>
        </postal>
        <phone>+1-978-844-5100</phone>
        <email>kevin.j.ma@ericsson.com</email>
      </address>
    </author>
    <author fullname="Jon Peterson" initials="J." surname="Peterson">
      <organization abbrev="Neustar">NeuStar</organization>
      <address>
        <postal>
          <street>1800 Sutter St Suite 570</street>
          <code>94520</code>
          <city>Concord, CA</city>
          <country>United States of America</country>
        </postal>
        <phone/>
        <facsimile/>
        <email>jon.peterson@neustar.biz</email>
      </address>
    </author>
    <author initials="X." surname="Lin" fullname="Xiao Shawn Lin">
      <organization abbrev="Tongji">Tongji University</organization>
      <address>
        <postal>
          <street>4800 Cao'an Hwy</street>
          <city>Shanghai</city>
          <code>201804</code>
          <country>China</country>
        </postal>
        <email>x.shawn.lin@gmail.com</email>
      </address>
    </author>
    <author initials="J." surname="Zhang" fullname="Jingxuan Jensen Zhang">
      <organization abbrev="Tongji">Tongji University</organization>
      <address>
        <postal>
          <street>4800 Cao'an Hwy</street>
          <city>Shanghai</city>
          <code>201804</code>
          <country>China</country>
        </postal>
        <email>jingxuan.zhang@tongji.edu.cn</email>
      </address>
    </author>
    <date/>
    <area>TSV Area</area>
    <workgroup>CDNI</workgroup>
    <keyword>ALTO</keyword>
    <keyword>CDNi</keyword>
    <abstract>
      <t>The Content Delivery Networks Interconnection (CDNI) framework
      [RFC6707] defines a set of protocols to interconnect CDNs, to achieve multiple goals such as extending the reach of a given CDN to areas that are not covered by that particular CDN. One component that is needed to achieve the goal of CDNI described in [RFC7336] is the CDNI Request Routing Footprint &amp; Capabilities Advertisement interface (FCI).
      [RFC8008] defines precisely the semantics of FCI and provides guidelines on the FCI protocol, but the exact protocol is explicitly outside the scope of that document. In this document, we follow the guidelines to define an FCI protocol using the Application-Layer Traffic Optimization (ALTO) protocol.
      </t>
    </abstract>
  </front>
  <middle><section anchor="intro" title="Introduction" numbered="true" toc="default"><t>The ability to interconnect multiple content delivery networks (CDNs) has many benefits, including increased coverage, capability, and reliability. The Content Delivery Networks Interconnection (CDNI) framework  <xref target="RFC6707" pageno="false" format="default"/> defines four interfaces to achieve interconnection of CDNs: (1)
      the CDNI Request Routing Interface; (2) the CDNI Metadata Interface;
       (3) the CDNI Logging Interface; and (4) the CDNI Control Interface.
      </t><t>Among the four interfaces, the CDNI Request Routing Interface provides key functions, as specified in <xref target="RFC6707" pageno="false" format="default"/>: "The CDNI Request Routing interface enables a Request Routing function in an Upstream CDN to query a Request Routing function in a Downstream CDN to determine if the Downstream CDN is able (and willing) to accept the delegated Content Request.  It also allows the Downstream CDN to control what should be returned to the User Agent in the redirection message by the upstream Request Routing function." On a high level, the scope of the CDNI Request Routing Interface, therefore, contains two main tasks: (1) determining if the downstream CDN (dCDN) is willing to accept a delegated content request; (2) redirecting the content request coming from an upstream CDN (uCDN) to the proper entry point or entity in the downstream CDN.
      </t><t>Correspondingly, the request routing interface is broadly divided into two functionalities: (1) CDNI Footprint &amp; Capabilities Advertisement interface (FCI); (2) CDNI Request Routing Redirection interface (RI). Since this document focuses on the first functionality, CDNI FCI, we will describe it in a more detailed way.
<!--       <list style="symbols"> -->
      CDNI FCI is an advertisement from a dCDN to a uCDN (push) or a query from a uCDN to a dCDN (pull) so that the uCDN knows whether it can redirect a particular user request to that dCDN.
<!--         <t>CDNI Request Routing Redirection interface (RI): the synchronous operation of actually redirecting a user request.</t> -->
<!--       </list> -->
      </t><t><!-- This document focuses on the first functionality, CDNI FCI. --> 
        A key component in defining CDNI FCI is defining objects describing the footprints and capabilities of a dCDN. Such objects are already in <xref target="RFC8008" pageno="false" format="default"/>. A protocol to transport and update such objects between a uCDN and a dCDN, however, is not defined. Hence, the scope of this document is to define such a protocol by introducing a new Application-Layer Traffic Optimization (ALTO) <xref target="RFC7285" pageno="false" format="default"/> service called "CDNI FCI Map Service".
      </t><t>There are multiple benefits in using ALTO as a transport protocol, as we discuss in <xref target="bgALTO" pageno="false" format="default"/>.</t><t>The rest of this document is organized as follows. <xref target="background" pageno="false" format="default"/> provides non-normative background on both CDNI FCI and ALTO. <xref target="cdnifcimap" pageno="false" format="default"/> introduces the most basic service, called CDNI FCI Map, to realize CDNI FCI using ALTO. <xref target="cdnifcinetworkmap" pageno="false" format="default"/> demonstrates a key benefit of using ALTO: the ability to integrate CDNI FCI with ALTO network maps. Such integration provides a new granularity to describe footprints. <xref target="filteredcdnifcimap" pageno="false" format="default"/> builds on filtered ALTO maps to introduce filtered CDNI FCI maps using capabilities so that a uCDN can get footprints with given capabilities instead of getting the full map which can be huge. <xref target="unifiedpropertymap" pageno="false" format="default"/> further shows a benefit of using ALTO: the ability to query footprint properties using ALTO unified properties. In this way, a uCDN can effectively fetch capabilities of some footprints in which it is interested. IANA and security considerations are discussed in <xref target="iana" pageno="false" format="default"/> and <xref target="security" pageno="false" format="default"/> respectively.</t><t>Throughout this document, we use the terminology for CDNI defined in <xref target="RFC6707" pageno="false" format="default"/>, <xref target="RFC8006" pageno="false" format="default"/>, <xref target="RFC8008" pageno="false" format="default"/> and we use the terminology for ALTO defined in <xref target="RFC7285" pageno="false" format="default"/>, <xref target="I-D.ietf-alto-unified-props-new" pageno="false" format="default"/>.
      </t></section>
<section anchor="background" title="Background" numbered="true" toc="default"><t>The design of CDNI FCI transport using ALTO depends on the understanding of both FCI semantics and ALTO. Hence, we start with a review of both.
      </t><section title="Semantics of FCI Advertisement" anchor="bgSemantics" numbered="true" toc="default"><t>The CDNI document on "Footprint and Capabilities Semantics" <xref target="RFC8008" pageno="false" format="default"/> defines the semantics of CDNI FCI, and provides guidance on what Footprint and Capabilities mean in a CDNI context and how a protocol solution should in principle look like. The definitions in [RFC8008] depend on [RFC8006]. Here we briefly summarize key related points of [RFC8008] and [RFC8006]. For a detailed discussion, the reader is referred to the RFCs.
        </t><t><list style="symbols"><t>Footprint and capabilities are tied together and cannot be interpreted independently from each other. Hence, capabilities must be expressed on a per footprint basis. [RFC8008] integrates footprint and capabilities with an approach of "capabilities with footprint restrictions".</t><t>Given that a large part of Footprint and Capabilities Advertisement will actually happen in contractual agreements, the semantics of CDNI Footprint and Capabilities advertisement refers to answering the following question: what exactly still needs to be advertised by the CDNI FCI? For instance, updates about temporal failures of part of a footprint can be useful information to convey via the CDNI request routing interface. Such information would provide updates on information previously agreed in contracts between the participating CDNs. In other words, the CDNI FCI is a means for a dCDN to provide changes/updates regarding a footprint and/or capabilities that it has prior agreed to serve in a contract with a uCDN. Hence, server push and incremental encoding will be necessary techniques.</t><t>Multiple types of footprints (ipv4cidr, ipv6cidr, asn and countrycode) are defined in <xref target="RFC8006" pageno="false" format="default"/>. </t><!--             <list style="symbols">
              <t>List of ISO country codes</t>
              <t>List of AS numbers</t>
              <t>Set of IP-prefixes</t>
            </list> --><t>
          A "Set of IP-prefixes" can contain both full IP addresses 
          (i.e., a /32 for IPv4 and a /128 for IPv6) and IP prefixes with an arbitrary prefix length. There must also be support for multiple IP address versions, i.e., IPv4 and IPv6, in such a footprint.
          </t><t>For all of these mandatory-to-implement footprint types, footprints can be viewed as constraints for delegating requests to a dCDN: A dCDN footprint advertisement tells the uCDN the limitations for delegating a request to the dCDN. For IP prefixes or ASN(s), the footprint signals to the uCDN that it should consider the dCDN a candidate only if the IP address of the request routing source falls within the prefix set (or ASN, respectively). The CDNI specifications do not define how a given uCDN determines what address ranges are in a particular ASN. Similarly, for country codes, a uCDN should only consider the dCDN a candidate if it covers the country of the request routing source. The CDNI specifications do not define how a given uCDN determines the country of the request routing source. Multiple footprint constraints are additive, i.e., the advertisement of different types of footprint narrows the dCDN candidacy cumulatively.
          </t><t>The following capabilities are defined as "base" capabilities; that is, they are required in all cases and therefore constitute mandatory capabilities to be supported by the CDNI FCI: (1) Delivery Protocol; (2) Acquisition Protocol; (3) Redirection Mode; (4) Capabilities related to CDNI Logging; (5) Capabilities related to CDNI Metadata.
<!--           <list style="symbols">
            <t>Delivery Protocol (e.g., HTTP vs. RTMP)</t>
            <t>Acquisition Protocol (for acquiring content from a uCDN)</t>
            <t>Redirection Mode (e.g., DNS Redirection vs. HTTP Redirection as discussed in <xref target="RFC7336" pageno="false" format="default"/>)</t>
            <t>Capabilities related to CDNI Logging (e.g., supported logging mechanisms)</t>
            <t>Capabilities related to CDNI Metadata (e.g., authorization
            algorithms or support for proprietary vendor metadata)</t>
          </list> -->
          </t></list></t></section><section anchor="bgALTO" title="ALTO Background and Benefits" numbered="true" toc="default"><t>Application-Layer Traffic Optimization (ALTO) <xref target="RFC7285" pageno="false" format="default"/> is an approach for guiding the resource provider selection process in distributed applications that can choose among several candidate resources providers to retrieve a given resource. By conveying network layer (topology) information, an ALTO server can provide important information to "guide" the resource provider selection process in distributed applications. Usually, it is assumed that an ALTO server conveys information that these applications cannot or have difficulty to measure themselves <xref target="RFC5693" pageno="false" format="default"/>.
        </t><t>
         Originally, ALTO was motivated by optimizing cross-ISP traffic generated by P2P applications <xref target="RFC5693" pageno="false" format="default"/>. Recently, however, ALTO is also being considered for improving the request routing in CDNs <xref target="I-D.jenkins-alto-cdn-use-cases" pageno="false" format="default"/>.  The CDNI problem statement explicitly mentions ALTO as a candidate protocol for "actual algorithms for selection of CDN or Surrogate by Request-Routing systems" <xref target="RFC6707" pageno="false" format="default"/>.
        </t><t>The following reasons make ALTO a suitable candidate protocol for downstream CDN selection as part of CDNI request routing and in particular for an FCI protocol:</t><t><list style="symbols"><t><!-- CDN request routing is done at the application layer.  -->ALTO is a protocol specifically designed to improve application layer traffic (and application layer connections among hosts on the Internet) by providing additional information to applications that these applications could not easily retrieve themselves. For CDNI, this is exactly the case: a uCDN wants to improve application layer CDN request routing by using dedicated information (provided by a dCDN) that the uCDN could not easily obtain otherwise. ALTO can help a uCDN to select a proper dCDN by first providing dCDNs' capabilities as well as footprints (see <xref target="cdnifcimap" pageno="false" format="default"/>) and then providing costs of surrogates in a dCDN by ALTO cost maps.
          </t><t>The semantics of an ALTO network map is an exact match for the needed information to convey a footprint by a downstream CDN, in particular if such a footprint is being expressed by IP-prefix ranges. Please see <xref target="cdnifcinetworkmap" pageno="false" format="default"/>.
          </t><t>Security: Identifications between uCDNs and dCDNs are extremely important. ALTO maps can be signed and hence provide inherent integrity protection. Please see <xref target="security" pageno="false" format="default"/>.</t><t>RESTful-Design: The ALTO protocol has undergone extensive revisions in order to provide a RESTful design regarding the client-server interaction specified by the protocol. A CDNI FCI interface based on ALTO would inherit this RESTful design. Please see <xref target="cdnifcimap" pageno="false" format="default"/>.</t><t>Error-handling: The ALTO protocol has undergone extensive revisions in order to provide sophisticated error-handling, in particular regarding unexpected cases. A CDNI FCI interface based on ALTO would inherit this thought-through and mature error-handling. Please see <xref target="filteredcdnifcimap" pageno="false" format="default"/>.
          </t><t>
            Filtered map service: The ALTO map filtering service would allow a uCDN to query only for parts of an ALTO map. For example, filtered unified property map service can enable a uCDN to query properties of a part of footprints in an effective way (see <xref target="unifiedpropertymap" pageno="false" format="default"/>).
          </t><t>Server-initiated Notifications and Incremental Updates: When the footprint or the capabilities of a downstream CDN change (i.e., unexpectedly from the perspective of an upstream CDN), server-initiated notifications would enable a dCDN to directly inform an upstream CDN about such changes. Consider the case where - due to failure - part of the footprint of the dCDN is not functioning, i.e., the CDN cannot serve content to such clients with reasonable QoS. Without server-initiated notifications, the uCDN might still use a very recent network and cost map from dCDN, and therefore redirect requests to dCDN which it cannot serve. Similarly, the possibility for incremental updates would enable efficient conveyance of the aforementioned (or similar) status changes by the dCDN to the uCDN. The newest design of ALTO supports server pushed incremental updates <xref target="I-D.ietf-alto-incr-update-sse" pageno="false" format="default"/>. </t><t>Content Availability on Hosts: A dCDN might want to express CDN capabilities in terms of certain content types (e.g., codecs/formats, or content from certain content providers). The new endpoint property for ALTO would enable a dCDN to make such information available to an upstream CDN. This would enable a uCDN to determine if a given dCDN actually has the capabilities for a given request with respect to the type of content requested.</t><!--  Please see <xref target="cdnifcinetworkmap"/></t> --><t>
            Resource Availability on Hosts or Links: The capabilities on links (e.g. maximum bandwidth) or caches (e.g. average load) might be useful information for an upstream CDN for optimized downstream CDN selection. For instance, if a uCDN receives a streaming request for content with a certain bitrate, it needs to know if it is likely that a dCDN can fulfill such stringent application-level requirements (i.e., can be expected to have enough consistent bandwidth) before it redirects the request. In general, if ALTO could convey such information via new endpoint properties, it would enable more sophisticated means for downstream CDN selection with ALTO. ALTO Path Vector Extension <xref target="I-D.ietf-alto-path-vector" pageno="false" format="default"/> is designed to allow ALTO clients to query information such as capacity regions for a given set of flows.</t></list></t><!--
        <t>Why ALTO cannot be the request routing protocol itself ...
        </t>
        --></section><!-- ALTO background --></section>
<section anchor="cdnifcimap" title="CDNI FCI Service" numbered="true" toc="default"><t>
          The ALTO protocol is based on an ALTO Information Service Framework which consists of several services, where all ALTO services are "provided through a common transport protocol, messaging structure and encoding, and transaction model" <xref target="RFC7285" pageno="false" format="default"/>. The ALTO protocol specification <xref target="RFC7285" pageno="false" format="default"/> defines several such services, e.g., the ALTO map service.
      </t><t>
          This document defines a new ALTO Service called "CDNI FCI Service" which conveys JSON objects of media type "application/alto-cdnifci+json". These JSON objects are used to transport BaseAdvertisementObject objects defined in <xref target="RFC8008" pageno="false" format="default"/>; this document specifies how to transport such BaseAdvertisementObject objects via the ALTO protocol with the ALTO "CDNI FCI Service". Similar to other ALTO services, this document defines the ALTO information resource for the "CDNI FCI Service" as follows.
        </t><section title="Media Type" anchor="cdnifcimapmediatype" numbered="true" toc="default"><t>
    		    The media type of the CDNI FCI resource is "application/alto-cdnifci+json".
    		</t></section><section title="HTTP Method" numbered="true" toc="default"><t>
    		    A CDNI FCI resource is requested using the HTTP GET method.
    		</t></section><section title="Accept Input Parameters" numbered="true" toc="default"><t>
    		    None.
    		</t></section><section title="Capabilities" numbered="true" toc="default"><t>
    			None.
    		</t></section><section title="Uses" numbered="true" toc="default"><t>
    		  The "uses" field SHOULD NOT appear unless the CDNI FCI resource depends on some ALTO information resources. If the CDNI FCI resource has some dependent resources, the resource IDs of its dependent resources MUST be included into the "uses" field. This document only defines one potential dependent resource for the CDNI FCI resource. See <xref target="cdnifcinetworkmap" pageno="false" format="default"/> for details of when and how to use it. The future documents may extend the CDNI FCI resource and allow other dependent resources.
    		</t></section><section title="Response" anchor="cdnifcimapencoding" numbered="true" toc="default"><t>
    			The "meta" field of a CDNI FCI response MUST include the "vtag" field defined in Section 10.3 of <xref target="RFC7285" pageno="false" format="default"/>. This field provides the version of the retrieved CDNI FCI map.</t><t>
          If a CDNI FCI response depends on an ALTO information resource, it MUST include the "dependent-vtags" field, whose value is an array to indicate the version tags of the resources used, where each resource is specified in "uses" of its IRD entry.
        </t><t>
    			The data component of an ALTO CDNI FCI response is named "cdni-fci", which is a JSON object of type CDNIFCIData:
    		</t><figure align="left" title="" suppress-title="false" alt="" width="" height=""><artwork align="left" xml:space="preserve" name="" type="" alt="" width="" height="">
    object {
        CDNIFCIData cdni-fci;
    } InfoResourceCDNIFCI : ResponseEntityBase;

    object {
        BaseAdvertisementObject capabilities&lt;1..*&gt;;
    } CDNIFCIData;
                </artwork></figure><t>
              Specifically, a CDNIFCIData object is a JSON object that includes only one property named "capabilities", whose value is an array of BaseAdvertisementObject objects.
            </t><t>
              The syntax and semantics of BaseAdvertisementObject are well defined in Section 5.1 of <xref target="RFC8008" pageno="false" format="default"/>. A BaseAdvertisementObject object includes multiple properties, including capability-type, capability-value and footprints, where footprints are defined in Section 4.2.2.2 of <xref target="RFC8006" pageno="false" format="default"/>.
            </t><t>
              To be self-contained, we give a non-normative specification of BaseAdvertisementObject below. As mentioned above, the normative specification of BaseAdvertisementObject is in <xref target="RFC8008" pageno="false" format="default"/>
            </t><figure align="left" title="" suppress-title="false" alt="" width="" height=""><artwork align="left" xml:space="preserve" name="" type="" alt="" width="" height="">
    object {
        JSONString capability-type;
        JSONValue capability-value;
        Footprint footprints&lt;0..*&gt;;
    } BaseAdvertisementObject;

    object {
        JSONString footprint-type;
        JSONString footprint-value&lt;1..*&gt;;
    } Footprint;
                </artwork></figure><t>
                For each BaseAdvertisementObject, the ALTO client MUST interpret footprints appearing multiple times as if they appeared only once. If footprints in a BaseAdvertisementObject is null or empty or not appearing, the ALTO client MUST understand that the capabilities in this BaseAdvertisementObject have the "global" coverage.
            </t><t>
                Note: Further optimization of BaseAdvertisement objects to effectively provide the advertisement of capabilities with footprint restrictions is certainly possible. For example, these two examples below both describe that the dCDN can provide capabilities ["http/1.1", "https/1.1"] for the same footprints. However, the latter one is smaller in its size.
        <figure align="left" title="" suppress-title="false" alt="" width="" height=""><artwork align="left" xml:space="preserve" name="" type="" alt="" width="" height="">
EXAMPLE 1
    {
      "meta" : {...},
      "cdni-fci": {
        "capabilities": [
          {
            "capability-type": "FCI.DeliveryProtocol",
            "capability-value": {
              "delivery-protocols": [
                "http/1.1"
              ]
            },
            "footprints": [
              &lt;Footprint objects&gt;
            ]
          },
          {
            "capability-type": "FCI.DeliveryProtocol",
            "capability-value": {
              "delivery-protocols": [
                "https/1.1"
              ]
            },
            "footprints": [
              &lt;Footprint objects&gt;
            ]
          }
        ]
      }
    }

EXAMPLE 2
    {
      "meta" : {...},
      "cdni-fci": {
        "capabilities": [
          {
            "capability-type": "FCI.DeliveryProtocol",
            "capability-value": {
              "delivery-protocols": [
                "https/1.1",
                "http/1.1"
              ]
            },
            "footprints": [
              &lt;Footprint objects&gt;
            ]
          }
        ]
      }
    }
</artwork></figure>

                Since such optimizations are not required for the basic interconnection of CDNs, the specifics of such mechanisms are outside the scope of this document.
            </t><!--             <t>
            	Capability objects of a given capability type with identical footprint restrictions MUST be combined into a single capability object. And footprints with the same capability type and capability value MUST be combined into a single capability object.
            </t> --><!--             <t>
                Multiple BaseAdvertisementObject objects with the same capability type are allowed within a given CDNI FCI Map response as long as the capability option footprint-value do not overlap, i.e., a given capability option value MUST NOT show up in multiple BaseAdvertisementObject objects with the same capability type. If multiple BaseAdvertisementObject objects for a given capability type exist, those capability objects MUST have different footprint restrictions. Capability objects of a given capability type with identical footprint restrictions MUST be combined into a single capability object.
            </t> --><!--             <t>
                Multiple FCIMapData objects with the same capability type are allowed within a given CDNI FCI Map response as long as the capability option footprint-value do not overlap, i.e., a given capability option value MUST NOT show up in multiple FCIMapData objects within a single CDNI FCI Map response.  If multiple FCIMapData objects for a given capability type exist, those capability objects MUST have different footprint restrictions.  Capability objects of a given capability type with identical footprint restrictions MUST be combined into a single capability object.
            </t> --></section><section title="Examples" numbered="true" toc="default"><section title="IRD Example" anchor="IRDexample" numbered="true" toc="default"><t>
    				Below is the information resource directory (IRD) of a simple, example ALTO server. The server provides both base ALTO information resources (e.g., network maps) and CDNI FCI related information resources (e.g., CDNI FCI resource), demonstrating a single, integrated environment.
          </t><t>
            Specifically, the IRD announces two network maps, one CDNI FCI resource without dependency, one CDNI FCI resource depending on a network map, one filtered CDNI FCI resource to be defined in <xref target="filteredcdnifcimap" pageno="false" format="default"/>, one unified property map including "cdni-fci-capabilities" as its entity property, one filtered unified property map including "cdni-fci-capabilities" and "pid" as its entity properties, and two update stream services (one for updating CDNI FCI resources, and the other for updating property maps).
    			</t><figure align="left" title="" suppress-title="false" alt="" width="" height=""><artwork align="left" xml:space="preserve" name="" type="" alt="" width="" height="">
 GET /directory HTTP/1.1
 Host: alto.example.com
 Accept: application/alto-directory+json,application/alto-error+json
</artwork></figure><figure align="left" title="" suppress-title="false" alt="" width="" height=""><artwork align="left" xml:space="preserve" name="" type="" alt="" width="" height="">
    {
      "meta" : { ... },
      "resources": {
        "my-default-network-map": {
          "uri" : "http://alto.example.com/networkmap",
          "media-type" : "application/alto-networkmap+json"
        },
        "my-eu-netmap" : {
          "uri" : "http://alto.example.com/myeunetmap",
          "media-type" : "application/alto-networkmap+json"
        },
        "my-default-cdnifci": {
          "uri" : "http://alto.example.com/cdnifci",
          "media-type": "application/alto-cdnifci+json"
        },
        "my-filtered-cdnifci" : {
          "uri" : "http://alto.example.com/cdnifci/filtered",
          "media-type" : "application/alto-cdnifci+json",
          "accepts" : "application/alto-cdnifcifilter+json",
          "uses" : [ "my-default-cdnifci" ]
        },
        "my-cdnifci-with-pid-footprints": {
          "uri" : "http://alto.example.com/networkcdnifci",
          "media-type" : "application/alto-cdnifci+json",
          "uses" : [ "my-eu-netmap" ]
        },
        "cdnifci-property-map" : {
          "uri" : "http://alto.example.com/propmap/full/cdnifci",
          "media-type" : "application/alto-propmap+json",
          "uses": [ "my-default-cdni" ],
          "capabilities" : {
            "mappings": {
              "ipv4": [ "my-default-cdni.cdni-fci-capabilities" ],
              "ipv6": [ "my-default-cdni.cdni-fci-capabilities" ],
              "countrycode": [
                "my-default-cdni.cdni-fci-capabilities" ],
              "asn": [ "my-default-cdni.cdni-fci-capabilities" ],
            }
          }
        },
        "filtered-cdnifci-property-map" : {
          "uri" : "http://alto.example.com/propmap/lookup/cdnifci-pid",
          "media-type" : "application/alto-propmap+json",
          "accepts" : "application/alto-propmapparams+json",
          "uses": [ "my-default-cdni", "my-default-network-map" ],
          "capabilities" : {
            "mappings": {
              "ipv4": [ "my-default-cdni.cdni-fci-capabilities",
                        "my-default-network-map.pid" ],
              "ipv6": [ "my-default-cdni.cdni-fci-capabilities",
                        "my-default-network-map.pid" ],
              "countrycode": [
                "my-default-cdni.cdni-fci-capabilities" ],
              "asn": [ "my-default-cdni.cdni-fci-capabilities" ],
            }
          }
        },
        "update-my-cdni-fci" : {
          "uri": "http:///alto.example.com/updates/cdnifci",
          "media-type" : "text/event-stream",
          "accepts" : "application/alto-updatestreamparams+json",
          "uses" : [
            "my-default-network-map",
            "my-eu-netmap",
            "my-default-cdnifci",
            "my-filtered-cdnifci"
            "my-cdnifci-with-pid-footprints"
          ],
          "capabilities" : {
            "incremental-change-media-types" : {
             "my-default-network-map" : "application/json-patch+json",
             "my-eu-netmap" : "application/json-patch+json",
             "my-default-cdnifci" :
             "application/merge-patch+json,application/json-patch+json",
             "my-filtered-cdnifci" :
             "application/merge-patch+jso,application/json-patch+json",
             "my-cdnifci-with-pid-footprints" :
             "application/merge-patch+json,application/json-patch+json"
            }
          }
        },
        "update-my-props": {
          "uri" : "http://alto.example.com/updates/properties",
          "media-type" : "text/event-stream",
          "uses" : [
            "cdnifci-property-map",
            "filtered-cdnifci-property-map"
          ],
          "capabilities" : {
            "incremental-change-media-types": {
             "cdnifci-property-map" :
             "application/merge-patch+json,application/json-patch+json",
             "filtered-cdnifci-property-map":
             "application/merge-patch+json,application/json-patch+json"
            }
          }
        }
      }
    }
    </artwork></figure></section><section title="Basic Example" anchor="fullcdnifcimap" numbered="true" toc="default"><t>
            In this example, we demonstrate a simple CDNI FCI resource; this resource does not depend on other resources. There are three BaseAdvertisementObjects in this map and these objects' capabilities are http/1.1 delivery protocol, [http/1.1, https/1.1] delivery protocol and https/1.1 acquisition protocol respectively.
          </t><figure align="left" title="" suppress-title="false" alt="" width="" height=""><artwork align="left" xml:space="preserve" name="" type="" alt="" width="" height="">
  GET /cdnifci HTTP/1.1
  Host: alto.example.com
  Accept: application/alto-cdnifci+json,
          application/alto-error+json
</artwork></figure><figure align="left" title="" suppress-title="false" alt="" width="" height=""><artwork align="left" xml:space="preserve" name="" type="" alt="" width="" height="">
  HTTP/1.1 200 OK
  Content-Length: XXX
  Content-Type: application/alto-cdnifci+json
  {
    "meta" : {
      "vtag": {
        "resource-id": "my-default-cdnifci",
        "tag": "da65eca2eb7a10ce8b059740b0b2e3f8eb1d4785"
      }
    },
    "cdni-fci": {
      "capabilities": [
        {
          "capability-type": "FCI.DeliveryProtocol",
          "capability-value": {
            "delivery-protocols": [
              "http/1.1"
            ]
          },
          "footprints": [
            &lt;Footprint objects&gt;
          ]
        },
        {
          "capability-type": "FCI.DeliveryProtocol",
          "capability-value": {
            "delivery-protocols": [
              "https/1.1",
              "http/1.1"
            ]
          },
          "footprints": [
            &lt;Footprint objects&gt;
          ]
        },
        {
          "capability-type": "FCI.AcquisitionProtocol",
          "capability-value": {
            "acquisition-protocols": [
              "https/1.1"
            ]
          },
          "footprints": [
            &lt;Footprint objects&gt;
          ]
        }
      ]
    }
  }
</artwork></figure></section><section title="Incremental Updates Example" numbered="true" toc="default"><t>
    				A benefit of using ALTO to provide CDNI FCI maps is that such maps can be updated using ALTO incremental updates. Below is an example that also shows the benefit of having both JSON merge patch and JSON patch to encode updates.
          </t><t>
          At first, an ALTO client requests updates for "my-default-cdnifci", and the ALTO server returns the "control-uri" followed by the full CDNI FCI response. Then when there is a change in the delivery-protocols in that `http/2` is removed (from http/1.1 and http/2 to only http/1.1) due to maintenance of the http/2 clusters, the ALTO server uses JSON merge patch to encode the change and pushes the change to the ALTO client. Later on, the ALTO server notifies the ALTO client that "ipv4:192.0.2.0/24" is added into the footprint for delivery-protocol http/1.1 by sending the change encoded by JSON patch to the ALTO client.
    			</t><figure align="left" title="" suppress-title="false" alt="" width="" height=""><artwork align="left" xml:space="preserve" name="" type="" alt="" width="" height="">
  POST /updates/cdnifci HTTP/1.1
  Host: alto.example.com
  Accept: text/event-stream,application/alto-error+json
  Content-Type: application/alto-updatestreamparams+json
  Content-Length: ###

  { "add": {
      "my-cdnifci-stream": {
          "resource-id": "my-default-cdnifci"
      }
  }

  HTTP/1.1 200 OK
  Connection: keep-alive
  Content-Type: text/event-stream

  event: application/alto-updatestreamcontrol+json
  data: {"control-uri":
  data: "http://alto.example.com/updates/streams/3141592653589"}

  event: application/alto-cdnifci+json,my-default-cdnifci
  data: { ... full CDNI FCI map ... }

  event: application/merge-patch+json,my-default-cdnifci
  data: {
  data:   "meta": {
  data:     "vtag": {
  data:       "tag": "dasdfa10ce8b059740bddsfasd8eb1d47853716"
  data:     }
  data:   },
  data:   "cdni-fci": {
  data:     "capabilities": [
  data:       {
  data:         "capability-type": "FCI.DeliveryProtocol",
  data:         "capability-value": {
  data:           "delivery-protocols": [
  data:             "http/1.1"
  data:           ]
  data:         },
  data:         "footprints": [
  data:           &lt;Footprint objects in only http/1.1&gt;
  data:         ]
  data:       }
  data:     ]
  data:   }
  data: }

  event: application/json-patch+json,my-default-cdnifci
  data: [
  data:   {
  data:     "op": "replace",
  data:     "path": "/meta/vtag/tag",
  data:     "value": "a10ce8b059740b0b2e3f8eb1d4785acd42231bfe"
  data:   },
  data:   { "op": "add",
  data:     "path": "/cdni-fci/capabilities/0/footprints/-",
  data:     "value": "ipv4:192.0.2.0/24"
  data:   }
  data: ]
                </artwork></figure></section></section></section>
<section title="CDNI FCI Service using ALTO Network Map" anchor="cdnifcinetworkmap" numbered="true" toc="default"><section title="Network Map Footprint Type: altopid" numbered="true" toc="default"><t>
            The ALTO protocol defines a concept called PID to represent a group of IPv4 or IPv6 addresses which can be applied the same management policy. The PID is an alternative to the pre-defined CDNI footprint types (i.e., ipv4cidr, ipv6cidr, asn, and countrycode).
          </t><t>
        	Specifically, a CDNI FCI resource can depend on an ALTO network map resource and use a new CDNI Footprint Type called "altopid" to compress its CDNI Footprint Payload.
        </t><t>
          "altopid" footprint type indicates that the corresponding footprint value is a list of PIDNames as defined in <xref target="RFC7285" pageno="false" format="default"/>.  These PIDNames are references of PIDs in a network map resource. Hence a CDNI FCI with "altopid" footprints depends on a network map. For such a CDNI FCI map, the resource id of its dependent network map MUST be included in the "uses" field of its IRD entry, and the "dependent-vtag" field with a reference to this network map MUST be included in its response (see the example in <xref target="networkmapfootprint" pageno="false" format="default"/>).
        </t></section><section title="Examples" numbered="true" toc="default"><section title="IRD Example" numbered="true" toc="default"><t>
    			We use the same IRD example given in <xref target="IRDexample" pageno="false" format="default"/>.
    		</t></section><section title="ALTO Network Map for CDNI FCI Footprints Example" anchor="networkmapexample" numbered="true" toc="default"><t>
              Below is an example network map whose resource id is "my-eu-netmap", and this map is referenced by the CDNI FCI example in <xref target="networkmapfootprint" pageno="false" format="default"/>.
            </t><figure align="left" title="" suppress-title="false" alt="" width="" height=""><artwork align="left" xml:space="preserve" name="" type="" alt="" width="" height="">
 GET /networkmap HTTP/1.1
 Host: http://alto.example.com/myeunetmap
 Accept: application/alto-networkmap+json,application/alto-error+json
</artwork></figure><figure align="left" title="" suppress-title="false" alt="" width="" height=""><artwork align="left" xml:space="preserve" name="" type="" alt="" width="" height="">
 HTTP/1.1 200 OK
 Content-Length: XXX
 Content-Type: application/alto-networkmap+json

 {
   "meta" : {
     "vtag": [
       {"resource-id": "my-eu-netmap",
        "tag": "3ee2cb7e8d63d9fab71b9b34cbf764436315542e"
       }
     ]
   },
   "network-map" : {
     "south-france" : {
       "ipv4" : [ "192.0.2.0/24", "198.51.100.0/25" ]
     },
     "germany" : {
       "ipv4" : [ "192.0.3.0/24"]
     }
   }
 }
</artwork></figure></section><section title="ALTO PID Footprints in CDNI FCI" anchor="networkmapfootprint" numbered="true" toc="default"><t>
              In this example, we show a CDNI FCI resource that depends on a network map described in <xref target="networkmapexample" pageno="false" format="default"/>.
            </t><figure align="left" title="" suppress-title="false" alt="" width="" height=""><artwork align="left" xml:space="preserve" name="" type="" alt="" width="" height="">
 GET /networkcdnifci HTTP/1.1
 Host: alto.example.com
 Accept: application/alto-cdnifci+json,application/alto-error+json
</artwork></figure><figure align="left" title="" suppress-title="false" alt="" width="" height=""><artwork align="left" xml:space="preserve" name="" type="" alt="" width="" height="">
 HTTP/1.1 200 OK
 Content-Length: 618
 Content-Type: application/alto-cdnifci+json

 {
   "meta" : {
     "dependent-vtags" : [
       {
         "resource-id": "my-eu-netmap",
         "tag": "3ee2cb7e8d63d9fab71b9b34cbf764436315542e"
       }
     ]
   },
   "cdni-fci": {
     "capabilities": [
       { "capability-type": "FCI.DeliveryProtocol",
         "capability-value": [
           "http/1.1"
         ]
       },
       { "capability-type": "FCI.DeliveryProtocol",
         "capability-value": [
           "https/1.1"
         ],
         "footprints": [
           { "footprint-type": "altopid",
             "footprint-value": [
               "germany",
               "south-france"
             ]
           }
         ]
       }
     ]
   }
 }
</artwork></figure></section><section title="Incremental Updates Example" numbered="true" toc="default"><t>
              In this example, the ALTO client is interested in changes of "my-cdnifci-with-pid-footprints". Considering two changes, the first one is to change footprints of http/1.1 Delivery Protocol capability, and the second one is to remove "south-france" from the footprints of https/1.1 delivery protocol capability.
            </t><figure align="left" title="" suppress-title="false" alt="" width="" height=""><artwork align="left" xml:space="preserve" name="" type="" alt="" width="" height="">
  POST /updates/cdnifci HTTP/1.1
  Host: alto.example.com
  Accept: text/event-stream,application/alto-error+json
  Content-Type: application/alto-updatestreamparams+json
  Content-Length: ###

  { "add": {
      "my-network-map-cdnifci-stream": {
          "resource-id": "my-cdnifci-with-pid-footprints"
      }
  }

  HTTP/1.1 200 OK
  Connection: keep-alive
  Content-Type: text/event-stream

  event: application/alto-updatestreamcontrol+json
  data: {"control-uri":
  data: "http://alto.example.com/updates/streams/3141592653590"}

  event: application/alto-cdnifci+json,my-fci-stream
  data: { ... full CDNI FCI resource ... }

  event: application/merge-patch+json,my-fci-stream
  data: {
  data:   "meta": {
  data:     "dependent-vtags" : [
  data:      {
  data:        "resource-id": "my-eu-netmap",
  data:        "tag": "3ee2cb7e8d63d9fab71b9b34cbf764436315542e"
  data:      }
  data:     ],
  data:     "vtag": {
  data:       "tag": "dasdfa10ce8b059740bddsfasd8eb1d47853716"
  data:     }
  data:   },
  data:   {
  data:     "capability-type": "FCI.DeliveryProtocol",
  data:     "capability-value": {
  data:       "delivery-protocols": [
  data:         "http/1.1"
  data:       ]
  data:     },
  data:     "footprints": [
  data:       &lt;All footprint objects in http/1.1&gt;
  data:     ]
  data:   }
  data: }

  event: application/json-patch+json,my-fci-stream
  data: [
  data:   {
  data:     "op": "replace",
  data:     "path": "/meta/vtag/tag",
  data:     "value": "a10ce8b059740b0b2e3f8eb1d4785acd42231bfe"
  data:   },
  data:   { "op": "remove",
  data:     "path": "/cdni-fci/capabilities/2/footprints/0/
  data:       footprint-value/1",
  data:   }
  data: ]
                </artwork></figure></section></section></section>
<section anchor="filteredcdnifcimap" title="Filtered CDNI FCI using Capabilities" numbered="true" toc="default"><t>
        <xref target="cdnifcimap" pageno="false" format="default"/> and <xref target="cdnifcinetworkmap" pageno="false" format="default"/> describe CDNI FCI Service which can be used to enable a uCDN to get capabilities with footprints constrains from dCDNs. However, always getting full CDNI FCI resources from dCDNs is very inefficient, hence we introduce a new service named "Filtered CDNI FCI Service" to allow a client to filter a CDNI FCI resource using a client-given set of capabilities. For each entry of the CDNI FCI response, only if the entry contains at least one of the client-given capabilities will it be returned to the client. The relationship between a filtered CDNI FCI resource and a CDNI FCI resource is similar to the relationship between a filtered network/cost map and a network/cost map.
    	</t><section title="Media Type" numbered="true" toc="default"><t>
          A filtered CDNI FCI resource uses the same media type defined for the CDNI FCI resource in <xref target="cdnifcimapmediatype" pageno="false" format="default"/>.
        </t></section><section title="HTTP Method" numbered="true" toc="default"><t>
          A filtered CDNI FCI resource is requested using the HTTP POST method.
        </t></section><section title="Accept Input Parameters" numbered="true" toc="default"><t>The input parameters for a filtered CDNI FCI resource are supplied in the entity body of the POST request. This document specifies the input parameters with a data format indicated by the media type "application/alto-cdnifcifilter+json" which is a JSON object of type ReqFilteredCDNIFCI, where:</t><figure align="left" title="" suppress-title="false" alt="" width="" height=""><artwork align="left" xml:space="preserve" name="" type="" alt="" width="" height="">
   object {
       JSONString capability-type;
       JSONValue capability-value;
   } CDNIFCICapability;

   object {
       [CDNIFCICapability cdni-fci-capabilities&lt;0..*&gt;;]
   } ReqFilteredCDNIFCI;
         </artwork></figure><t>with fields: </t><t><list style="hanging"><t hangText="capability-type:">
            	The same as Base Advertisement Object's capability-type defined in Section 5.1 of <xref target="RFC8008" pageno="false" format="default"/>.
            </t><t hangText="capability-value:">
                The same as Base Advertisement Object's capability-value defined in Section 5.1 of <xref target="RFC8008" pageno="false" format="default"/>.
            </t><t hangText="cdni-fci-capabilities:">
            	A list of CDNI FCI capabilities defined in Section 5.1 of <xref target="RFC8008" pageno="false" format="default"/> for which footprints are to be returned. If a list is empty or not appearing, the ALTO server MUST interpret it as a request for the full CDNI FCI resource. The ALTO server MUST interpret entries appearing in a list multiple times as if they appeared only once. If the ALTO server does not define any footprints for a CDNI capability, it MUST omit this capability from the response.
            </t></list></t></section><section title="Capabilities" numbered="true" toc="default"><t>
    		    None.
    	    </t></section><section title="Uses" numbered="true" toc="default"><t>
          The resource ID of the CDNI FCI resource based on which the filtering is performed.
        </t></section><section title="Response" numbered="true" toc="default"><t>
        The response MUST indicate an error, using ALTO protocol error handling specified in Section 8.5 of the ALTO protocol  <xref target="RFC7285" pageno="false" format="default"/>, if the request is invalid.
      </t><t>
        Specifically, a filtered CDNI FCI request is invalid if:
        <list style="symbols"><t>the value of "capability-type" is null;</t><t>the value of "capability-value" is null;</t><t>the value of "capability-value" is inconsistent with "capability-type".</t></list>
        When a request is invalid, the ALTO server MUST return an "E_INVALID_FIELD_VALUE" error defined in Section 8.5.2 of <xref target="RFC7285" pageno="false" format="default"/>, and the "value" field of the error message SHOULD indicate this CDNI FCI capability.
      </t><t>
        The ALTO server returns a filtered CDNI FCI resource for a valid request.
    		The format of a filtered CDNI FCI resource is the same as an full CDNI FCI resource (See <xref target="cdnifcimapencoding" pageno="false" format="default"/>.)
    	</t><t>
    		The returned CDNI FCI resource MUST contain only BaseAdvertisementObject objects whose CDNI capability object is the superset of one of CDNI capability object in "cdni-fci-capabilities".

        Specifically, that a CDNI capability object A is the superset of another CDNI capability object B means that these two CDNI capability objects have the same capability type and mandatory properties in capability value of A MUST include mandatory properties in capability value of B semantically. See <xref target="filtercdnifcimapexample" pageno="false" format="default"/> for a concrete example.
      </t><!--         For example, if a CDNI FCI capability in "cdni-fci-capabilities" is Delivery Protocol capability object with "http/1.1" in its field "delivery-protocols" and the original full CDNI FCI map has two CDNI FCI objects whose capabilities are Delivery Protocol capability objects with ["http/1.1"] and ["http/1.1", "https/1.1"] in their field "delivery-protocols" respectively, both of these two CDNI FCI objects MUST be returned. If the input parameters contain a CDNI capability object that is not currently defined, the ALTO server MUST behave as if the CDNI capability object did not appear in the input parameters.  --><t>
    		The version tag included in the "vtag" field of the response MUST correspond to the full CDNI FCI resource from which the filtered CDNI FCI resource is provided. This ensures that a single, canonical version tag is used independently of any filtering that is requested by an ALTO client.
    	</t></section><section title="Examples" numbered="true" toc="default"><section title="IRD Example" numbered="true" toc="default"><t>
    			We use the same IRD example by <xref target="IRDexample" pageno="false" format="default"/>.
    		</t></section><section title="Basic Example" anchor="filtercdnifcimapexample" numbered="true" toc="default"><t>
    			    This example filters the full CDNI FCI resource in <xref target="fullcdnifcimap" pageno="false" format="default"/> by selecting only http/1.1 delivery protocol capability. Only the first two BaseAdvertisementObjects in the full resource will be returned because the first object's capability is http/1.1 delivery protocol and the second object's capability is http/1.1 and https/1.1 delivery protocols which is the superset of http/1.1 delivery protocol.
    			</t><figure align="left" title="" suppress-title="false" alt="" width="" height=""><artwork align="left" xml:space="preserve" name="" type="" alt="" width="" height="">
  POST /cdnifci/filtered HTTP/1.1
  HOST: alto.example.com
  Content-Type: application/cdnifilter+json
  Accept: application/alto-cdnifci+json

  {
    "cdni-fci-capabilities": [
      {
        "capability-type": "FCI.DeliveryProtocol",
        "capability-value": {
          "delivery-protocols": [
            "http/1.1"
          ]
        }
      }
    ]
  }

  HTTP/1.1 200 OK
  Content-Length: XXX
  Content-Type: application/alto-cdnifci+json
  {
    "meta" : {
      "vtag": {
        "resource-id": "my-default-cdnifci",
        "tag": "da65eca2eb7a10ce8b059740b0b2e3f8eb1d4785"
      }
    },
    "cdni-fci": {
      "capabilities": [
        {
          "capability-type": "FCI.DeliveryProtocol",
          "capability-value": {
            "delivery-protocols": [
              "http/1.1"
            ]
          },
          "footprints": [
            &lt;Footprint objects&gt;
          ]
        },
        {
          "capability-type": "FCI.DeliveryProtocol",
          "capability-value": {
            "delivery-protocols": [
              "https/1.1",
              "http/1.1"
            ]
          },
          "footprints": [
            &lt;Footprint objects&gt;
          ]
        }
      ]
    }
  }
</artwork></figure></section><section title="Incremental Updates Example" numbered="true" toc="default"><t>
            In this example, the ALTO client only cares about the updates of one Delivery Protocol object whose value is "http/1.1". So it adds its limitation of capabilities in "input" field of the POST request.
          </t><figure align="left" title="" suppress-title="false" alt="" width="" height=""><artwork align="left" xml:space="preserve" name="" type="" alt="" width="" height="">
  POST /updates/cdnifci HTTP/1.1
  Host: fcialtoupdate.example.com
  Accept: text/event-stream,application/alto-error+json
  Content-Type: application/alto-updatestreamparams+json
  Content-Length: ###

  { "add": {
      "my-fci-stream": {
          "resource-id": "my-filtered-cdnifci",
          "input": {
            "cdni-fci-capabilities": [
            {
              "capability-type": "FCI.DeliveryProtocol",
              "capability-value": {
                "delivery-protocols": [
                  "http/1.1"
                ]
              }
            }
          ]
        }
      }
    }
  }

  HTTP/1.1 200 OK
  Connection: keep-alive
  Content-Type: text/event-stream

  event: application/alto-updatestreamcontrol+json
  data: {"control-uri":
  data: "http://alto.example.com/updates/streams/3141592653590"}

  event: application/alto-cdnifci+json,my-fci-stream
  data: { ... full filtered CDNI FCI resource ... }

  event: application/merge-patch+json,my-fci-stream
  data: {
  data:   "meta": {
  data:     "vtag": {
  data:       "tag": "dasdfa10ce8b059740bddsfasd8eb1d47853716"
  data:     }
  data:   },
  data:   {
  data:     "capability-type": "FCI.DeliveryProtocol",
  data:     "capability-value": {
  data:       "delivery-protocols": [
  data:         "http/1.1"
  data:       ]
  data:     },
  data:     "footprints": [
  data:       &lt;All footprint objects in http/1.1&gt;
  data:     ]
  data:   }
  data: }

  event: application/json-patch+json,my-fci-stream
  data: [
  data:   {
  data:     "op": "replace",
  data:     "path": "/meta/vtag/tag",
  data:     "value": "a10ce8b059740b0b2e3f8eb1d4785acd42231bfe"
  data:   },
  data:   { "op": "add",
  data:     "path": "/cdni-fci/capabilities/0/footprints/-",
  data:     "value": "ipv4:192.0.2.0/24"
  data:   }
  data: ]
                </artwork></figure></section></section></section>
<section anchor="unifiedpropertymap" title="Query Footprint Properties using ALTO Property Map Service" numbered="true" toc="default"><t>
          Besides retrieving footprints of given capabilities, another common requirement for uCDN is to query CDNI capabilities of given footprints.
          <!-- Previous sections describe how a uCDN can get the whole capabilities and footprints from dCDNs and how a uCDN can get the footprints of given capabilities. But there is another important case which is how a uCDN can get properties (i.e., capabilities) of given footprints. -->
        </t><t>
          Considering each footprint as an entity with properties including CDNI capabilities, the most natrual way to satisfy this requirement is to use the ALTO property map defined in <xref target="I-D.ietf-alto-unified-props-new" pageno="false" format="default"/>.
          <!-- The most natrual way to satisfy this requirement is to use ALTO property map defined in <xref target="I-D.ietf-alto-unified-props-new"/> since footprints can be easily presented as groups of entities and Filtered Property Maps are already well-defined. -->
          In this section, we describe how ALTO clients look up properties for individual footprints. We firstly describe how to represent footprint objects as entities in the ALTO property map. And then we provide examples of the full property map and the filtered property map supporting CDNI capabilities, and their incremental updates.<!-- Our design decision here is to use ALTO unified property map service to query footprint properties because we do not want to introduce extra complexity and ALTO unified property map defined in <xref target="I-D.ietf-alto-unified-props-new"/> already meets the requirement.  -->
        </t><!--         <t>
          A footprint is a group of entities, and CDNI capabilities can be regarded as properties of a footprint. Unified property map is used to provide properties for collections of entities such as CIDRs or PIDs. So every footprint can be presented as a set of entities, and we will describe it in details in <xref target="footprinttoentities"/>. In addition, two resource types Property Maps and Filtered Property Maps are already well-defined in <xref target="I-D.ietf-alto-unified-props-new"/>.
        </t> --><!--         <t>
            A unified property map that includes "cdni-fci-capabilities" property registered in <xref target="iana"/> builds the inverted index of a CDNI FCI map. The building process consists of two steps: firstly, each footprint object is represented as a set of unified property map entities in a domain; secondly, each unified property map entity is mapped into a list of property objects including CDNI capabilities.
        </t> --><section title="Representing Footprint Objects as Unified Property Map Entities" anchor="footprinttoentities" numbered="true" toc="default"><t>
              A footprint object has two properties: footprint-type and footprint-value. A footprint-value is an array of footprint values conforming to the specification associated with the registered footprint type ("ipv4cidr", "ipv6cidr", "asn", and "countrycode").
              Considering each ALTO entity defined in <xref target="I-D.ietf-alto-unified-props-new" pageno="false" format="default"/> also has two properties: entity domain type and domain-specific identifier, a straightforward approach to represent a footprint as an ALTO entity is to regard its footprint-type as an entity domain type, and its footprint value as a domain-specific identifier. According to <xref target="I-D.ietf-alto-unified-props-new" pageno="false" format="default"/>, "ipv4" and "ipv6" are two predefined entity domain types, which can be used to represent "ipv4cidr" and "ipv6cidr" footprints respectively. However, no existing entity domain type can represent "asn" and "countrycode" footprints.
              <!-- Since each unified property map entity has a unique address and each pair of footprint-type and a footprint value determines a group of unique addresses, a footprint object can be represented as a set of entities according to their different footprint-type and footprint values. However, <xref target="I-D.ietf-alto-unified-props-new"/> only defines IPv4 Domain and IPv6 Domain which represent footprint-type "ipv4cidr" and "ipv6cidr" respectively. -->
              To represent footprint-type "asn" and "countrycode", this document registers two new domains in <xref target="iana" pageno="false" format="default"/> in addition to the ones in <xref target="I-D.ietf-alto-unified-props-new" pageno="false" format="default"/>.
            </t><t>
              Here is an example of representing a footprint object as a set of entities in the ALTO property map.
            </t><t>
              {"footprint-type": "ipv4cidr", "footprint-value": ["192.0.2.0/24", "198.51.100.0/24"]}
              --&gt; "ipv4:192.168.2.0/24", "ipv4:198.51.100.0/24"
            </t><section title="ASN Domain" numbered="true" toc="default"><t>
  			      The ASN domain associates property values with Autonomous Systems in the Internet.
  		        </t><section title="Entity Domain Type" numbered="true" toc="default"><t>
  		    		    asn
  		    	    </t></section><section title="Domain-Specific Entity Identifiers" anchor="asn-entity-address" numbered="true" toc="default"><t>
  		                 The entity identifiers of entities in an asn domain is encoded as a string consisting of the characters "as" (in lowercase) followed by the Autonomous System Number <xref target="RFC6793" pageno="false" format="default"/>.
  		            </t></section><section title="Hierarchy and Inheritance" numbered="true" toc="default"><t>
  		        		There is no hierarchy or inheritance for properties associated with ASN.
  		        	</t></section></section><section title="COUNTRYCODE Domain" numbered="true" toc="default"><t>
        		    The COUNTRYCODE domain associates property values with countries.
        	    </t><section title="Entity Domain Type" numbered="true" toc="default"><t>
        			    countrycode
        		    </t></section><section title="Domain-Specific Entity Identifiers" anchor="countrycode-entity-address" numbered="true" toc="default"><t>
        			    The entity identifiers of entities in a countrycode domain is encoded as an ISO 3166-1 alpha-2 code <xref target="ISO3166-1" pageno="false" format="default"/> in lowercase.
        		    </t></section><section title="Hierarchy and Inheritance" numbered="true" toc="default"><t>
                  There is no hierarchy or inheritance for properties associated with country codes.
                </t></section></section></section><section title="Examples" numbered="true" toc="default"><section title="IRD Example" numbered="true" toc="default"><t>
    			We use the same IRD example given by <xref target="IRDexample" pageno="false" format="default"/>.
    		</t></section><section title="Property Map Example" numbered="true" toc="default"><t>
              This example shows a full property map in which entities are footprints and entities' property is "cdni-fci-capabilities".
            </t><figure align="left" title="" suppress-title="false" alt="" width="" height=""><artwork align="left" xml:space="preserve" name="" type="" alt="" width="" height="">
    GET /propmap/full/cdnifci HTTP/1.1
    HOST: alto.example.com
    Accept: application/alto-propmap+json,application/alto-error+json

    HTTP/1.1 200 OK
    Content-Length: ###
    Content-Type: application/alto-propmap+json

    {
      "property-map": {
        "meta": {
          "dependent-vtags": [
            {"resource-id": "my-default-cdnifci",
             "tag": "7915dc0290c2705481c491a2b4ffbec482b3cf62"}
          ]
        },
        "countrycode:us": {
          "my-default-cdnifci.cdni-fci-capabilities": [
            {"capability-type": "FCI.DeliveryProtocol",
             "capability-value": {"delivery-protocols": ["http/1.1"]}}]
        },
        "ipv4:192.0.2.0/24": {
          "my-default-cdnifci.cdni-fci-capabilities": [
            {"capability-type": "FCI.DeliveryProtocol",
             "capability-value": {"delivery-protocols": ["http/1.1"]}}]
        },
        "ipv4:198.51.100.0/24": {
          "my-default-cdnifci.cdni-fci-capabilities": [
            {"capability-type": "FCI.DeliveryProtocol",
             "capability-value": {"delivery-protocols": ["http/1.1"]}}]
        },
        "ipv6:2001:db8::/32": {
          "my-default-cdnifci.cdni-fci-capabilities": [
            {"capability-type": "FCI.DeliveryProtocol",
             "capability-value": {"delivery-protocols": ["http/1.1"]}}]
        },
        "asn:as64496": {
          "my-default-cdnifci.cdni-fci-capabilities": [
            {"capability-type": "FCI.DeliveryProtocol",
             "capability-value": {"delivery-protocols": ["http/1.1",
                                                         "https/1.1"]}}]
        }
      }
    }
</artwork></figure></section><section title="Filtered Property Map Example" numbered="true" toc="default"><t>
              In this example, we use filtered property map service to get "pid" and "cdni-fci-capabilities" properties for two footprints "ipv4:192.0.2.0/24" and "ipv6:2001:db8::/32".
            </t><figure align="left" title="" suppress-title="false" alt="" width="" height=""><artwork align="left" xml:space="preserve" name="" type="" alt="" width="" height="">
   POST /propmap/lookup/cdnifci-pid HTTP/1.1
   HOST: alto.example.com
   Content-Type: application/alto-propmapparams+json
   Accept: application/alto-propmap+json,application/alto-error+json
   Content-Length:

   {
     "entities": [
       "ipv4:192.0.2.0/24",
       "ipv6:2001:db8::/32"
     ],
     "properties": [ "my-default-cdnifci.cdni-fci-capabilities",
                     "my-default-networkmap.pid" ]
   }
</artwork></figure><figure align="left" title="" suppress-title="false" alt="" width="" height=""><artwork align="left" xml:space="preserve" name="" type="" alt="" width="" height="">
   HTTP/1.1 200 OK
   Content-Length: ###
   Content-Type: application/alto-propmap+json

   {
     "property-map": {
       "meta": {
         "dependent-vtags": [
            {"resource-id": "my-default-cdnifci",
              "tag": "7915dc0290c2705481c491a2b4ffbec482b3cf62"},
            {"resource-id": "my-default-networkmap",
              "tag": "7915dc0290c2705481c491a2b4ffbec482b3cf63"}
         ]
       },
       "ipv4:192.0.2.0/24": {
         "my-default-cdnifci.cdni-fci-capabilities": [
           {"capability-type": "FCI.DeliveryProtocol",
            "capability-value": {"delivery-protocols": ["http/1.1"]}}],
         "my-default-networkmap.pid": "pid1"
       },
       "ipv6:2001:db8::/32": {
         "my-default-cdnifci.cdni-fci-capabilities": [
           {"capability-type": "FCI.DeliveryProtocol",
            "capability-value": {"delivery-protocols": ["http/1.1"]}}],
         "my-default-networkmap.pid": "pid3"
       }
     }
   }
</artwork></figure></section><section title="Incremental Updates Example" numbered="true" toc="default"><t>
              In this example, here is a client want to request updates for the properties "cdni-fci-capabilities" and "pid" for two footprints "ipv4:192.0.2.0/24" and "countrycode:fr".
            </t><figure align="left" title="" suppress-title="false" alt="" width="" height=""><artwork align="left" xml:space="preserve" name="" type="" alt="" width="" height="">
   POST /updates/properties HTTP/1.1
   Host: alto.example.com
   Accept: text/event-stream,application/alto-error+json
   Content-Type: application/alto-updatestreamparams+json
   Content-Length: ###

   { "add": {
     "property-map-including-capability-property": {
       "resource-id": "filtered-cdnifci-property-map",
         "input": {
           "properties": [ "my-default-cdnifci.cdni-fci-capabilities",
                           "my-default-networkmap.pid" ],
           "entities": [
             "ipv4:192.0.2.0/24",
             "ipv6:2001:db8::/32"
           ]
         }
       }
   }

   HTTP/1.1 200 OK
   Connection: keep-alive
   Content-Type: text/event-stream

   event: application/alto-updatestreamcontrol+json
   data: {"control-uri":
   data: "http://alto.example.com/updates/streams/1414213562373"}

   event: application/alto-cdnifci+json,my-fci-stream
   data: { ... full filtered unified property map ... }

   event: application/merge-patch+json,my-fci-stream
   data: {
   data:   "property-map":
   data:   {
   data:     "meta": {
   data:       "dependent-vtags": [
   data:         {"resource-id": "my-default-cdnifci",
   data:          "tag": "2beeac8ee23c3dd1e98a73fd30df80ece9fa5627"},
   data:         {"resource-id": "my-default-networkmap",
   data:          "tag": "7915dc0290c2705481c491a2b4ffbec482b3cf63"}
   data:       ]
   data:     },
   data:     "ipv4:192.0.2.0/24":
   data:     {
   data:     "my-default-cdnifci.cdni-fci-capabilities": [
   data:       {"capability-type": "FCI.DeliveryProtocol",
   data:        "capability-value": {
   data:          "delivery-protocols": ["http/1.1"]}}]
   data:     }
   data:   }
   data: }

   event: application/json-patch+json,my-fci-stream
   data: {[
   data: {
   data:   { "op": "replace",
   data:     "path": "/meta/dependent-vtags/0/tag",
   data:     "value": "61b23185a50dc7b334577507e8f00ff8c3b409e4"
   data:   },
   data:   { "op": "replace",
   data:     "path":
   data:     "/property-map/countrycode:fr/my-default-networkmap.pid",
   data:     "value": "pid5"
   data:   }
   data: }
   data: ]}
                </artwork></figure></section></section></section>
<!--     &protocolerrors; --><!-- &knownissues; --><section title="IANA Considerations" anchor="iana" numbered="true" toc="default"><section title="CDNI Metadata Footprint Type Registry" anchor="newfootprinttype" numbered="true" toc="default"><texttable anchor="tbl:footprint-type" align="center" title="CDNI Metadata Footprint Type" suppress-title="false" style="full"><ttcol align="left" width="16%">
              Footprint Type
            </ttcol><ttcol align="left" width="34%">
              Description
            </ttcol><ttcol align="left" width="34%">
              Specification
            </ttcol><c>
              altopid
            </c><c>
              A list of PID-names
            </c><c>
              RFCthis
            </c></texttable><t>
        [RFC Editor: Please replace RFCthis with the published RFC number for this document.]
      </t></section><section title="ALTO Entity Domain Type Registry" numbered="true" toc="default"><t>
      As proposed in Section 11.2 of <xref target="I-D.ietf-alto-unified-props-new" pageno="false" format="default"/>,
      "ALTO Entity Domain Type Registry" is requested. Besides, two
      new entity domain types are to be registered, listed in
      <xref target="tbl:entity-domain" pageno="false" format="default"/>.
    </t><texttable anchor="tbl:entity-domain" align="center" title="ALTO Entity Domain Types" suppress-title="false" style="full"><ttcol align="left" width="16%">
              Identifier
            </ttcol><ttcol align="left" width="34%">
              Entity Address Encoding
            </ttcol><ttcol align="left" width="34%">
              Hierarchy &amp; Inheritance
            </ttcol><c>
              asn
            </c><c>
              See <xref target="asn-entity-address" pageno="false" format="default"/>
            </c><c>
              None
            </c><c>
              countrycode
            </c><c>
              See <xref target="countrycode-entity-address" pageno="false" format="default"/>
            </c><c>
              None
            </c></texttable></section><section title="ALTO Entity Property Type Registry" numbered="true" toc="default"><t>
      As proposed in Section 11.3 of <xref target="I-D.ietf-alto-unified-props-new" pageno="false" format="default"/>,
      "ALTO Entity Property Type Registry" is required. Besides, a new
      entity property type is to be registred, listed in
      <xref target="tbl:prop-type-register" pageno="false" format="default"/>.
    </t><texttable anchor="tbl:prop-type-register" align="center" title="ALTO CDNI FCI Property Type" suppress-title="false" style="full"><ttcol align="left" width="16%">
              Identifier
            </ttcol><ttcol align="left" width="29%">
              Intended Semantics
            </ttcol><c>
              cdni-fci-capabilities
            </c><c>
              An array of CDNI FCI capability objects
            </c></texttable></section></section>
<section anchor="security" title="Security Considerations" numbered="true" toc="default"><t>
  	     	As an extension of the base ALTO protocol [RFC7285], this document 
        fits into the architecture of the base protocol, and hence the Security 
        Considerations (Section 15) of the base protocol fully apply when this 
        extension is provided by an ALTO server. 
  	     </t><t>In the context of CDNI FCI, additional security considerations should be included as follows.
         </t><t>
          For authenticity and integrity of ALTO information, an attacker may disguise itself as an ALTO server for a dCDN, and provide false capabilities and footprints to a uCDN using the CDNI FCI map. Such false information may lead a uCDN to (1) select an incorrect dCDN to serve user requests or (2) skip uCDNs in good conditions.
         </t><t>
          For potential undesirable guidance from authenticated ALTO information, dCDNs can provide a uCDN with limited capabilities and smaller footprint coverage so that dCDNs can avoid transferring traffic for a uCDN which they should have to transfer.  
         </t><t>
          For confidentiality and privacy of ALTO information, footprint properties integrated with ALTO unified property may expose network location identifiers (e.g., IP addresses or fine-grained PIDs). 
         </t><t>
          For availability of ALTO services, an attacker may get the potential huge full CDNI FCI maps from an ALTO server in a dCDN continuously to run out of bandwidth resources of that ALTO server or may query filtered CDNI FCI services with complex capabilities to run out of computation resources of an ALTO server.
         </t><t>
          Protection strategies described in RFC 7285 can solve problems mentioned above well. However, the isolation of full/filtered CDNI FCI maps should also be considered.
         </t><t>
          <!-- The identification of ALTO clients and ALTO servers is extremely important in CDNI. Because capabilities and footprints are key information for dCDNs and they are key factors influencing the final selection decision of a uCDN. --> 
          If a dCDN signs agreements with multiple uCDNs, it must isolate full/filtered CDNI FCI maps for different uCDNs in that uCDNs will not redirect requests which should not have to served by this dCDN to this dCDN and it may not disclose extra information to uCDNs.
         </t><t>
          To avoid this risk, a dCDN may consider generating URIs of different full/filtered CDNI FCI maps by hashing its company ID, a uCDN's company ID as well as their agreements. And it needs to avoid expoing all full/filtered CDNI FCI maps resources in one of its IRDs.
         </t><!--          <t>One important security consideration is the proper authentication of advertisement information provided by a downstream CDN. The ALTO protocol provides a specification for a signature of ALTO information (see Section 15 of <xref target="RFC7285" pageno="false" format="default"/>. ALTO thus provides a proper mechanism for protecting the integrity of FCI information.</t>

         <t>More Security Considerations will be discussed in a future version of this document.</t> --></section>
<section anchor="ack" title="Acknowledgments" numbered="true" toc="default"><t>The authors would like to thank Daryl Malas, Matt Caulfield for their timely reviews and invaluable comments.</t><t>Jan Seedorf is partially supported by the GreenICN project
      (GreenICN: Architecture and Applications of Green Information Centric
      Networking), a research project supported jointly by the European
      Commission under its 7th Framework Program (contract no. 608518) and
      the National Institute of Information and Communications Technology
      (NICT) in Japan (contract no. 167).  The views and conclusions
      contained herein are those of the authors and should not be
      interpreted as necessarily representing the official policies or
      endorsements, either expressed or implied, of the GreenICN project,
      the European Commission, or NICT.</t></section>
</middle>
  <back>
    <references title="Normative References">
      <reference anchor="RFC5693" target="https://www.rfc-editor.org/info/rfc5693" xml:base="https://xml2rfc.tools.ietf.org/public/rfc/bibxml/reference.RFC.5693.xml">
        <front>
          <title>Application-Layer Traffic Optimization (ALTO) Problem Statement</title>
          <author initials="J." surname="Seedorf" fullname="J. Seedorf">
            <organization/>
          </author>
          <author initials="E." surname="Burger" fullname="E. Burger">
            <organization/>
          </author>
          <date year="2009" month="October"/>
          <abstract>
            <t>Distributed applications -- such as file sharing, real-time communication, and live and on-demand media streaming -- prevalent on the Internet use a significant amount of network resources.  Such applications often transfer large amounts of data through connections established between nodes distributed across the Internet with little knowledge of the underlying network topology.  Some applications are so designed that they choose a random subset of peers from a larger set with which to exchange data.  Absent any topology information guiding such choices, or acting on suboptimal or local information obtained from measurements and statistics, these applications often make less than desirable choices.</t>
            <t>This document discusses issues related to an information-sharing service that enables applications to perform better-than-random peer selection.  This memo provides information for the Internet community.</t>
          </abstract>
        </front>
        <seriesInfo name="RFC" value="5693"/>
        <seriesInfo name="DOI" value="10.17487/RFC5693"/>
      </reference>
      <reference anchor="RFC6707" target="https://www.rfc-editor.org/info/rfc6707" xml:base="https://xml2rfc.tools.ietf.org/public/rfc/bibxml/reference.RFC.6707.xml">
        <front>
          <title>Content Distribution Network Interconnection (CDNI) Problem Statement</title>
          <author initials="B." surname="Niven-Jenkins" fullname="B. Niven-Jenkins">
            <organization/>
          </author>
          <author initials="F." surname="Le Faucheur" fullname="F. Le Faucheur">
            <organization/>
          </author>
          <author initials="N." surname="Bitar" fullname="N. Bitar">
            <organization/>
          </author>
          <date year="2012" month="September"/>
          <abstract>
            <t>Content Delivery Networks (CDNs) provide numerous benefits for cacheable content: reduced delivery cost, improved quality of experience for End Users, and increased robustness of delivery.  For these reasons, they are frequently used for large-scale content delivery.  As a result, existing CDN Providers are scaling up their infrastructure, and many Network Service Providers (NSPs) are deploying their own CDNs.  It is generally desirable that a given content item can be delivered to an End User regardless of that End User's location or attachment network.  This is the motivation for interconnecting standalone CDNs so they can interoperate as an open content delivery infrastructure for the end-to-end delivery of content from Content Service Providers (CSPs) to End Users.  However, no standards or open specifications currently exist to facilitate such CDN Interconnection.</t>
            <t>The goal of this document is to outline the problem area of CDN Interconnection for the IETF CDNI (CDN Interconnection) working group.  This document is not an Internet Standards Track specification;  it is published for informational purposes.</t>
          </abstract>
        </front>
        <seriesInfo name="RFC" value="6707"/>
        <seriesInfo name="DOI" value="10.17487/RFC6707"/>
      </reference>
      <!-- <?rfc include="reference.RFC.6770.xml" ?> -->
      <reference anchor="RFC6793" target="https://www.rfc-editor.org/info/rfc6793" xml:base="https://xml2rfc.tools.ietf.org/public/rfc/bibxml/reference.RFC.6793.xml">
        <front>
          <title>BGP Support for Four-Octet Autonomous System (AS) Number Space</title>
          <author initials="Q." surname="Vohra" fullname="Q. Vohra">
            <organization/>
          </author>
          <author initials="E." surname="Chen" fullname="E. Chen">
            <organization/>
          </author>
          <date year="2012" month="December"/>
          <abstract>
            <t>The Autonomous System number is encoded as a two-octet entity in the base BGP specification.  This document describes extensions to BGP to carry the Autonomous System numbers as four-octet entities.  This document obsoletes RFC 4893 and updates RFC 4271.  [STANDARDS-TRACK]</t>
          </abstract>
        </front>
        <seriesInfo name="RFC" value="6793"/>
        <seriesInfo name="DOI" value="10.17487/RFC6793"/>
      </reference>
      <reference anchor="RFC7285" target="https://www.rfc-editor.org/info/rfc7285" xml:base="https://xml2rfc.tools.ietf.org/public/rfc/bibxml/reference.RFC.7285.xml">
        <front>
          <title>Application-Layer Traffic Optimization (ALTO) Protocol</title>
          <author initials="R." surname="Alimi" fullname="R. Alimi" role="editor">
            <organization/>
          </author>
          <author initials="R." surname="Penno" fullname="R. Penno" role="editor">
            <organization/>
          </author>
          <author initials="Y." surname="Yang" fullname="Y. Yang" role="editor">
            <organization/>
          </author>
          <author initials="S." surname="Kiesel" fullname="S. Kiesel">
            <organization/>
          </author>
          <author initials="S." surname="Previdi" fullname="S. Previdi">
            <organization/>
          </author>
          <author initials="W." surname="Roome" fullname="W. Roome">
            <organization/>
          </author>
          <author initials="S." surname="Shalunov" fullname="S. Shalunov">
            <organization/>
          </author>
          <author initials="R." surname="Woundy" fullname="R. Woundy">
            <organization/>
          </author>
          <date year="2014" month="September"/>
          <abstract>
            <t>Applications using the Internet already have access to some topology information of Internet Service Provider (ISP) networks.  For example, views to Internet routing tables at Looking Glass servers are available and can be practically downloaded to many network application clients.  What is missing is knowledge of the underlying network topologies from the point of view of ISPs.  In other words, what an ISP prefers in terms of traffic optimization -- and a way to distribute it.</t>
            <t>The Application-Layer Traffic Optimization (ALTO) services defined in this document provide network information (e.g., basic network location structure and preferences of network paths) with the goal of modifying network resource consumption patterns while maintaining or improving application performance.  The basic information of ALTO is based on abstract maps of a network.  These maps provide a simplified view, yet enough information about a network for applications to effectively utilize them.  Additional services are built on top of the maps.</t>
            <t>This document describes a protocol implementing the ALTO services. Although the ALTO services would primarily be provided by ISPs, other entities, such as content service providers, could also provide ALTO services.  Applications that could use the ALTO services are those that have a choice to which end points to connect.  Examples of such applications are peer-to-peer (P2P) and content delivery networks.</t>
          </abstract>
        </front>
        <seriesInfo name="RFC" value="7285"/>
        <seriesInfo name="DOI" value="10.17487/RFC7285"/>
      </reference>
      <!-- <?rfc include="reference.RFC.7336.xml" ?> -->
      <!-- <?rfc include="reference.RFC.7337.xml" ?> -->
      <reference anchor="RFC8006" target="https://www.rfc-editor.org/info/rfc8006" xml:base="https://xml2rfc.tools.ietf.org/public/rfc/bibxml/reference.RFC.8006.xml">
        <front>
          <title>Content Delivery Network Interconnection (CDNI) Metadata</title>
          <author initials="B." surname="Niven-Jenkins" fullname="B. Niven-Jenkins">
            <organization/>
          </author>
          <author initials="R." surname="Murray" fullname="R. Murray">
            <organization/>
          </author>
          <author initials="M." surname="Caulfield" fullname="M. Caulfield">
            <organization/>
          </author>
          <author initials="K." surname="Ma" fullname="K. Ma">
            <organization/>
          </author>
          <date year="2016" month="December"/>
          <abstract>
            <t>The Content Delivery Network Interconnection (CDNI) Metadata interface enables interconnected Content Delivery Networks (CDNs) to exchange content distribution metadata in order to enable content acquisition and delivery.  The CDNI Metadata associated with a piece of content provides a downstream CDN with sufficient information for the downstream CDN to service content requests on behalf of an upstream CDN.  This document describes both a base set of CDNI Metadata and the protocol for exchanging that metadata.</t>
          </abstract>
        </front>
        <seriesInfo name="RFC" value="8006"/>
        <seriesInfo name="DOI" value="10.17487/RFC8006"/>
      </reference>
      <reference anchor="RFC8008" target="https://www.rfc-editor.org/info/rfc8008" xml:base="https://xml2rfc.tools.ietf.org/public/rfc/bibxml/reference.RFC.8008.xml">
        <front>
          <title>Content Delivery Network Interconnection (CDNI) Request Routing: Footprint and Capabilities Semantics</title>
          <author initials="J." surname="Seedorf" fullname="J. Seedorf">
            <organization/>
          </author>
          <author initials="J." surname="Peterson" fullname="J. Peterson">
            <organization/>
          </author>
          <author initials="S." surname="Previdi" fullname="S. Previdi">
            <organization/>
          </author>
          <author initials="R." surname="van Brandenburg" fullname="R. van Brandenburg">
            <organization/>
          </author>
          <author initials="K." surname="Ma" fullname="K. Ma">
            <organization/>
          </author>
          <date year="2016" month="December"/>
          <abstract>
            <t>This document captures the semantics of the "Footprint and                          Capabilities Advertisement" part of the Content Delivery Network Interconnection (CDNI) Request Routing interface, i.e., the desired meaning of "Footprint" and "Capabilities" in the CDNI context and what the "Footprint &amp; Capabilities Advertisement interface (FCI)" offers within CDNI.  The document also provides guidelines for the CDNI FCI protocol.  It further defines a Base Advertisement Object, the necessary registries for capabilities and footprints, and guidelines on how these registries can be extended in the future.</t>
          </abstract>
        </front>
        <seriesInfo name="RFC" value="8008"/>
        <seriesInfo name="DOI" value="10.17487/RFC8008"/>
      </reference>
      <reference anchor="ISO3166-1" quote-title="true">
        <front>
          <title>Codes for the representation of names of countries and their subdivisions -- Part 1: Country codes</title>
          <author>
            <organization>The International Organization for Standardization</organization>
          </author>
          <date year="2013"/>
        </front>
        <seriesInfo name="ISO" value="3166-1:2013"/>
      </reference>
    </references>
    <references title="Informative References">
      <!--
      <reference anchor="I-D.peterson-CDNI-strawman">
        <front>
          <title>Content Distribution Network Interconnection (CDNI) Problem Statement</title>

            <author initials="L." surname="Peterson" fullname="L. Peterson">
              <organization abbrev="Verivue Inc."/>
            </author>
            <author initials="J." surname="Hartman" fullname="J. Hartman">
              <organization abbrev="Verivue Inc."/>
            </author>
            <date month="May" year="2011"/>
        </front>
        <seriesInfo name="Internet-Draft" value="draft-peterson-CDNI-strawman-01"/>
      </reference>
      -->
      <!-- <?rfc include="reference.I-D.marocco-alto-next"?> -->
      <!-- <?rfc include="reference.I-D.marocco-alto-ws"?> -->
      <reference anchor="I-D.ietf-alto-path-vector" xml:base="https://xml2rfc.tools.ietf.org/public/rfc/bibxml3/reference.I-D.draft-ietf-alto-path-vector-08.xml">
        <front>
          <title>ALTO Extension: Path Vector</title>
          <author initials="K" surname="Gao" fullname="Kai Gao">
            <organization/>
          </author>
          <author initials="Y" surname="Lee" fullname="Young Lee">
            <organization/>
          </author>
          <author initials="S" surname="Randriamasy" fullname="Sabine Randriamasy">
            <organization/>
          </author>
          <author initials="Y" surname="Yang" fullname="Y. Yang">
            <organization/>
          </author>
          <author initials="J" surname="Zhang" fullname="J. Zhang">
            <organization/>
          </author>
          <date month="July" day="22" year="2019"/>
          <abstract>
            <t>This document defines an ALTO extension that allows a resource to provide not only preferences of network paths but also correlations of network paths, including aggregations of network components and their properties on the paths between different PIDs or endpoints. The extended information can be used to improve the robustness and performance for applications in some new usage scenarios, such as high-speed data transfers and traffic optimization using in-network storage and computation.  This document introduces abstract network element (ANE) as an abstraction for aggregations of network components.  It extends the base protocol and the Unified Property extension to enable the capability of encoding such information in a "path vector", i.e., an array of ANEs that are traversed by traffic from a source to a destination.</t>
          </abstract>
        </front>
        <seriesInfo name="Internet-Draft" value="draft-ietf-alto-path-vector-08"/>
        <format type="TXT" target="http://www.ietf.org/internet-drafts/draft-ietf-alto-path-vector-08.txt"/>
      </reference>
      <reference anchor="I-D.ietf-alto-incr-update-sse" xml:base="https://xml2rfc.tools.ietf.org/public/rfc/bibxml3/reference.I-D.draft-ietf-alto-incr-update-sse-17.xml">
        <front>
          <title>ALTO Incremental Updates Using Server-Sent Events (SSE)</title>
          <author initials="W" surname="Roome" fullname="Wendy Roome">
            <organization/>
          </author>
          <author initials="Y" surname="Yang" fullname="Y. Yang">
            <organization/>
          </author>
          <date month="July" day="23" year="2019"/>
          <abstract>
            <t>The Application-Layer Traffic Optimization (ALTO) [RFC7285] protocol provides network related information, called network information resources, to client applications so that clients can make informed decisions in utilizing network resources.  For example, an ALTO server can provide network and cost maps so that an ALTO client can use the maps to determine the costs between network endpoints when choosing communicating endpoints.  However, the ALTO protocol does not define a mechanism to allow an ALTO client to obtain updates to the information resources, other than by periodically re-fetching them.  Because some information resources (e.g., the aforementioned maps) may be large (potentially tens of megabytes), and because only parts of the information resources may change frequently (e.g., only some entries in a cost map), complete re-fetching can be extremely inefficient.  This document presents a mechanism to allow an ALTO server to push updates to ALTO clients, to achieve two benefits: (1) updates can be immediate, in that the ALTO server can send updates as soon as they are available; and (2) updates can be incremental, in that if only a small section of an information resource changes, the ALTO server can send just the changes.</t>
          </abstract>
        </front>
        <seriesInfo name="Internet-Draft" value="draft-ietf-alto-incr-update-sse-17"/>
        <format type="TXT" target="http://www.ietf.org/internet-drafts/draft-ietf-alto-incr-update-sse-17.txt"/>
      </reference>
      <reference anchor="I-D.jenkins-alto-cdn-use-cases" xml:base="https://xml2rfc.tools.ietf.org/public/rfc/bibxml3/reference.I-D.draft-jenkins-alto-cdn-use-cases-03.xml">
        <front>
          <title>Use Cases for ALTO within CDNs</title>
          <author initials="B" surname="Niven-Jenkins" fullname="Ben Niven-Jenkins">
            <organization/>
          </author>
          <author initials="G" surname="Watson" fullname="Grant Watson">
            <organization/>
          </author>
          <author initials="N" surname="Bitar" fullname="Nabil Bitar">
            <organization/>
          </author>
          <author initials="J" surname="Medved" fullname="Jan Medved">
            <organization/>
          </author>
          <author initials="S" surname="Previdi" fullname="Stefano Previdi">
            <organization/>
          </author>
          <date month="June" day="10" year="2012"/>
          <abstract>
            <t>For some time, Content Distribution Networks (CDNs) have been used in the delivery of some Internet services (e.g. delivery of websites, software updates and video delivery) as they provide numerous benefits including reduced delivery cost for cacheable content, improved quality of experience for end users and increased robustness of delivery.  In order to derive the optimal benefit from a CDN it is preferable to deliver content from the servers (caches) that are "closest" to the End User requesting the content, where "closest" may be as simple as "geographical or network distance" combined with CDN server load within a location, but may also consider other more complex combinations of metrics and CDN or Network Service Provider (NSP) policies.  There are a number of different ways in which a CDN may obtain the necessary network topology and/or cost information to allow it to serve End Users from the most optimal servers/locations, such as static configuration, passively listening to routing protocols directly, active probing of underlying network(s), or obtaining topology and cost by querying an information service such as the ALTO map &amp; cost services.  This document describes the use cases for a CDN to be able to obtain network topology and cost information from an ALTO server(s).</t>
          </abstract>
        </front>
        <seriesInfo name="Internet-Draft" value="draft-jenkins-alto-cdn-use-cases-03"/>
        <format type="TXT" target="http://www.ietf.org/internet-drafts/draft-jenkins-alto-cdn-use-cases-03.txt"/>
      </reference>
      <!--       <?rfc include="reference.I-D.draft-ma-cdni-capabilities-09.xml"?> -->
      <reference anchor="I-D.ietf-alto-unified-props-new" xml:base="https://xml2rfc.tools.ietf.org/public/rfc/bibxml3/reference.I-D.draft-ietf-alto-unified-props-new-08.xml">
        <front>
          <title>Unified Properties for the ALTO Protocol</title>
          <author initials="W" surname="Roome" fullname="Wendy Roome">
            <organization/>
          </author>
          <author initials="S" surname="Randriamasy" fullname="Sabine Randriamasy">
            <organization/>
          </author>
          <author initials="Y" surname="Yang" fullname="Y. Yang">
            <organization/>
          </author>
          <author initials="J" surname="Zhang" fullname="J. Zhang">
            <organization/>
          </author>
          <date month="July" day="8" year="2019"/>
          <abstract>
            <t>This document extends the Application-Layer Traffic Optimization (ALTO) Protocol [RFC7285] by generalizing the concept of "endpoint properties" to domains of other entities, and by presenting those properties as maps, similar to the network and cost maps in [RFC7285].</t>
          </abstract>
        </front>
        <seriesInfo name="Internet-Draft" value="draft-ietf-alto-unified-props-new-08"/>
        <format type="TXT" target="http://www.ietf.org/internet-drafts/draft-ietf-alto-unified-props-new-08.txt"/>
      </reference>
      <!-- <?rfc include="reference.I-D.liu-cdni-cost"?> -->
      <!-- <?rfc include="reference.I-D.ietf-cdni-metadata"?>  -->
      <!-- <?rfc include="reference.I-D.ietf-cdni-logging"?> -->
    </references>
  </back>
</rfc>
